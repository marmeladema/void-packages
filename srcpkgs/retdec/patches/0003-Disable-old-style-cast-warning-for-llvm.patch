From bf60c8289e9768e9820b5c1786cdd7105dcbddb6 Mon Sep 17 00:00:00 2001
From: Elie ROUDNINSKI <elie@cloudflare.com>
Date: Thu, 11 Oct 2018 15:24:11 +0100
Subject: [PATCH] Disable old-style-cast warning for llvm

---
 deps/llvm/CMakeLists.txt | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/deps/llvm/CMakeLists.txt b/deps/llvm/CMakeLists.txt
index da9bd7b..2ef3440 100644
--- a/deps/llvm/CMakeLists.txt
+++ b/deps/llvm/CMakeLists.txt
@@ -10,6 +10,8 @@ if(CMAKE_CXX_COMPILER)
 	set(CMAKE_CXX_COMPILER_OPTION "-DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}")
 endif()
 
+set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-old-style-cast")
+
 # Set the default build type to 'Release'
 if(NOT CMAKE_BUILD_TYPE)
 	set(default_build_type "Release")
@@ -72,6 +74,7 @@ ExternalProject_Add(llvm-project
 		# compiler, which may result in link errors.
 		"${CMAKE_C_COMPILER_OPTION}"
 		"${CMAKE_CXX_COMPILER_OPTION}"
+		"-DCMAKE_CXX_FLAGS=${CMAKE_CXX_FLAGS}"
 
 	# Disable the installation right after build (we want to install the
 	# needed libraries and tools manually).
-- 
2.19.1

