From 11d29bf3e996c9e2838c86113b5b55cffe9867a9 Mon Sep 17 00:00:00 2001
From: Elie ROUDNINSKI <elie@cloudflare.com>
Date: Wed, 10 Oct 2018 17:35:31 +0100
Subject: [PATCH] Take DESTDIR into account when installing from python script

---
 cmake/install-share.py                      | 2 +-
 support/yara_patterns/tools/compile-yara.py | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/cmake/install-share.py b/cmake/install-share.py
index 1406fab..94d36db 100755
--- a/cmake/install-share.py
+++ b/cmake/install-share.py
@@ -32,7 +32,7 @@ def get_install_path(argv):
         print('ERROR: Unexpected number of arguments.')
         sys.exit(1)
     else:
-        return argv[1]
+        return os.getenv('DESTDIR', '') + argv[1]
 
 
 def main():
diff --git a/support/yara_patterns/tools/compile-yara.py b/support/yara_patterns/tools/compile-yara.py
index 8bd00dd..b97bebe 100644
--- a/support/yara_patterns/tools/compile-yara.py
+++ b/support/yara_patterns/tools/compile-yara.py
@@ -31,7 +31,7 @@ def get_arguments():
     if len(sys.argv) != 4:
         print_help()
         sys.exit(1)
-    return sys.argv[1], sys.argv[2], sys.argv[3]
+    return sys.argv[1], sys.argv[2], os.getenv('DESTDIR', '')+sys.argv[3]
 
 
 def main():
-- 
2.19.1

